<% posts.each do |post| %>
  <div style="margin-bottom: 10px;">
      <div class="row">
        <div class="col-2 text-right">
          <%= link_to user_path(post.user_id) do %>
            <div><%= image_tag post.user.get_profile_image(70,70),class: "profile_image"%></div>
          <% end %>
        </div>
        <div class="col-8">
          <div class="card">
            <li class="list-group-item">
              <div class="d-flex"><%= post.user.name %>&nbsp;&nbsp;&nbsp;<p style="color: grey;"><%= time_ago_in_words(post.created_at).upcase+'前' %></p></div>
              <%= post.content %>
              <% if post.get_image.present? %>
                <%= image_tag post.get_image %>
              <% end %>
            </li>
            <li class="list-group-item">
              <p>
                <%= link_to post_path(post.id) do %>
                  <i class="fa-solid fa-reply"></i><%= post.post_comments.count %>
                <% end %>&nbsp;&nbsp;

                <% if post.favorited_by?(current_user) %>

                  <!--  いいねされている時  -->
                  <%= link_to post_favorites_path(post.id),class: "link_orange", method: :delete do %>
                    <i class="fa-solid fa-star"></i><%= post.favorites.where(reaction: 0).count %>
                  <% end %>&nbsp;&nbsp;
                  <%= link_to post_favorites_path(post.id),class: "link_red", method: :delete do %>
                    <i class="fa-solid fa-heart"></i><%= post.favorites.where(reaction: 1).count %>
                  <% end %>&nbsp;&nbsp;
                  <%= link_to post_favorites_path(post.id),class: "link_blue", method: :delete do %>
                    <i class="fa-solid fa-glasses"></i><%= post.favorites.where(reaction: 2).count %>
                  <% end %>&nbsp;&nbsp;
                  <%= link_to post_favorites_path(post.id),class: "link_green", method: :delete do %>
                    <i class="fa-solid fa-seedling"></i><%= post.favorites.where(reaction: 3).count %>
                  <% end %>&nbsp;&nbsp;
                  <%= link_to post_favorites_path(post.id),class: "link_yellow", method: :delete do %>
                    <i class="fa-solid fa-bolt"></i><%= post.favorites.where(reaction: 4).count %>
                  <% end %>&nbsp;&nbsp;

                <% else %>

                  <!--  いいねされていない時  -->
                  <%= link_to post_favorites_path(post.id, reaction: 0, favorited_id: post.user.id),class: "link_black", method: :post do %>
                    <i class="fa-solid fa-star"></i><%= post.favorites.where(reaction: 0).count %>
                  <% end %>&nbsp;&nbsp;
                  <%= link_to post_favorites_path(post.id, reaction: 1, favorited_id: post.user.id),class: "link_black", method: :post do %>
                    <i class="fa-solid fa-heart"></i><%= post.favorites.where(reaction: 1).count %>
                  <% end %>&nbsp;&nbsp;
                  <%= link_to post_favorites_path(post.id, reaction: 2, favorited_id: post.user.id),class: "link_black", method: :post do %>
                    <i class="fa-solid fa-glasses"></i><%= post.favorites.where(reaction: 2).count %>
                  <% end %>&nbsp;&nbsp;
                  <%= link_to post_favorites_path(post.id, reaction: 3, favorited_id: post.user.id),class: "link_black", method: :post do %>
                    <i class="fa-solid fa-seedling"></i><%= post.favorites.where(reaction: 3).count %>
                  <% end %>&nbsp;&nbsp;
                  <%= link_to post_favorites_path(post.id, reaction: 4, favorited_id: post.user.id),class: "link_black", method: :post do %>
                    <i class="fa-solid fa-bolt"></i><%= post.favorites.where(reaction: 4).count %>
                  <% end %>&nbsp;&nbsp;

                <% end %>
                <% if current_user.id == post.user_id %>
                  <%= link_to 'Destroy', post_path(post.id), method: :delete, class: "btn btn-sm btn-danger"%>
                <% end %>
              </p>
            </li>
          </div>
        </div>
      </div>
  </div>
<% end %>
<%= paginate posts %>